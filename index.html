<!DOCTYPE html>
<html>
<head>
  <title>IT Quiz Game Leaderboard</title>
  <style>
    body { font-family: Arial; text-align: center; background: #f4f4f4; }
    table { margin: 20px auto; border-collapse: collapse; width: 80%; }
    th, td { border: 1px solid #333; padding: 10px; }
    th { background-color: #333; color: white; }
    td { background-color: #fff; }
  </style>
</head>
<body>
  <h1>IT Quiz Game Leaderboard</h1>
  <table id="leaderboard">
    <thead>
      <tr>
        <th>Player</th>
        <th>Score</th>
        <th>Difficulty</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCQIi-iv9KEwvOxM9EjtzlgAXuVWU92PS0",
      authDomain: "it-quiz-game-68692.firebaseapp.com",
      databaseURL: "https://it-quiz-game-68692-default-rtdb.firebaseio.com/",
      projectId: "it-quiz-game-68692",
      storageBucket: "it-quiz-game-68692.appspot.com",
      messagingSenderId: "YOUR_MESSAGING_ID",
      appId: "YOUR_APP_ID"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function updateLeaderboard(snapshot){
      const tbody = document.querySelector("#leaderboard tbody");
      tbody.innerHTML = ""; // clear
      const scores = [];

      snapshot.forEach(playerSnap => {
        const player = playerSnap.key;
        const data = playerSnap.val();
        scores.push({player, ...data});
      });

      // Sort descending by score
      scores.sort((a,b) => b.score - a.score);

      scores.forEach(item => {
        const tr = document.createElement("tr");
        const date = new Date(item.date);
        tr.innerHTML = `
          <td>${item.player}</td>
          <td>${item.score}</td>
          <td>${item.difficulty}</td>
          <td>${date.toLocaleString()}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    const scoresRef = db.ref("scores");
    scoresRef.on("value", updateLeaderboard); // real-time updates
  </script>
</body>
</html>
